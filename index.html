<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
	<head><meta http-equiv="X-UA-Compatible" content="IE=10" />
		<script type="text/jscript">
			window.external.InitScriptInterface();
            var printCounter = 0;

            function logOutput(msg) {
                document.getElementById("output").value = msg;
            }
            function printing(data){
                dPrinterName = "Posiflex PP7600 Printer";
                dPrinter = SiteKiosk.Printer.FindPrinter(dPrinterName);
                dPrinter.PrintDocument("Arial", 80, data, "", "", false);
                printCounter = printCounter + 1;
                logOutput("Printing: " + str(printCounter));
            }
            function onClickPrint(){
                var printString = 'A rather long string of English text, an error message \
                actually that just keeps going and going -- an error \
                message to make the Energizer bunny blush (right through \
                those Schwarzenegger shades)! Where was I? Oh yes, \
                you\'ve got an error and all the extraneous whitespace is \
                just gravy.  Have a nice day.'
                printing(printString);
            }

            var bardcodeCallback = function (data, deviceName){
                logOutput("read from scanner: " + str(data));
                var printString = str(data) + '\n\n';
                printString += str(deviceName);
                printing(printString);
            }

            function onClickRegisterBarcode(){
                var deviceName = "barcode";
                SiteKiosk.RootApp.registerForDeviceData(deviceName, bardcodeCallback);
                logOutput("Registered Barcode Scanner");
            }
		</script>
		
		<title>Testing</title>
	</head>
	<body>
        <div> 
            <button onclick="onClickPrint()">Print me</button>
        </div>
        <div>
            <button onclick="onClickRegisterBarcode()">RegisterBarcode</button>
        </div>
        <div>
            <p id="output">Output Field</p>
        </div>
	</body>
</html>
